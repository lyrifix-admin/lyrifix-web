import{o as e,w as U,A,a as m,t as I}from"./chunk-NL6KNZEE-CxvR8bn4.js";import{M as F,C as L}from"./song-ByDppcAO.js";import{S as w}from"./artist-C-xmUNrL.js";import{c as z,B as k}from"./button-DLC1agRu.js";import{C as R,a as V,b as O,c as T}from"./card-CW33uc-b.js";import{I as x}from"./input-xm3ORQld.js";import{L as o}from"./label-D3N-KwjU.js";import{c as p}from"./utils-bRKmu4jq.js";import{u as B,p as P}from"./hooks-PJGK5Pe1.js";import{u as _}from"./integrations-Cf1gwroS.js";import{g as E,a as n}from"./helpers-CZocgdl2.js";import{c as K}from"./createLucideIcon-8xFrFlUl.js";import"./index-B3T0X-bt.js";import"./lyric-DRC73VJJ.js";import"./index-Vg_Lyc_r.js";/**
 * @license lucide-react v0.507.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],q=K("circle-alert",M),H=z("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90"}},defaultVariants:{variant:"default"}});function W({className:a,variant:r,...i}){return e.jsx("div",{"data-slot":"alert",role:"alert",className:p(H({variant:r}),a),...i})}function Z({className:a,...r}){return e.jsx("div",{"data-slot":"alert-title",className:p("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",a),...r})}function ce({}){return[{title:"Add New Song to Lyrifix"}]}const de=U(function({actionData:r,loaderData:i}){const{artists:u,uploadcarePublicKey:g}=i,c=A().state==="submitting",[l,t]=B({onValidate({formData:s}){return P(s,{schema:L})},lastResult:r,shouldValidate:"onBlur",shouldRevalidate:"onBlur",defaultValue:{imageUrl:"",title:"",artistIds:[]}}),[d,h]=m.useState(t.imageUrl.initialValue??""),f=t.artistIds.getFieldList(),v=u.map(s=>({value:s.id,label:s.name})),j=_(t.artistIds),[y,N]=m.useState([]),S=s=>{N(s);const b=s.map(C=>C.value);j.change(b)};return e.jsx("div",{className:"flex flex-col items-center pt-10",children:e.jsxs(R,{className:"w-xs",children:[e.jsx(V,{children:e.jsx(O,{className:"text-center font-bold",children:"Add New Song"})}),e.jsx(T,{children:e.jsxs(I,{method:"post",...E(l),className:"mr-4 ml-4 space-y-4",children:[l.errors&&e.jsxs(W,{variant:"destructive",children:[e.jsx(q,{}),e.jsx(Z,{children:l.errors})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(o,{htmlFor:t.title.id,children:"Song Title *"}),e.jsx(x,{...n(t.title,{type:"text"}),placeholder:"Song Title",className:"border-zinc-700 bg-zinc-800"}),e.jsx("p",{className:"text-sm text-red-500",children:t.title.errors})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(o,{htmlFor:t.artistIds.id,children:"Select Artists *"}),e.jsx(F,{defaultOptions:v,artistOptions:y,handleChangeArtistOptions:S,id:"artist",placeholder:"Type artist name...",className:"border-zinc-700 bg-zinc-800"}),e.jsx("p",{className:"text-sm text-red-500",children:t.artistIds.errors}),e.jsx("ul",{children:f.map(s=>e.jsxs("li",{children:[e.jsx("input",{name:s.name}),e.jsx("div",{children:s.errors})]},s.key))})]}),e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(o,{htmlFor:t.spotifyUrl.id,children:"Spotify URL"}),e.jsx(x,{...n(t.spotifyUrl,{type:"text"}),placeholder:"Spotify URL",className:"border-zinc-700 bg-zinc-800"}),e.jsx("p",{className:"text-sm text-red-500",children:t.spotifyUrl.errors})]}),e.jsxs("div",{className:"flex cursor-pointer flex-col items-center",children:[e.jsxs("label",{htmlFor:t.imageUrl.id,children:[e.jsx(w,{value:d,onChange:h,publicKey:g}),e.jsx("input",{...n(t.imageUrl,{type:"text"}),value:d,readOnly:!0,className:"hidden"})]}),e.jsx("p",{className:"text-sm text-red-500",children:t.imageUrl.errors})]}),e.jsx("div",{children:e.jsx(k,{className:"w-full",disabled:c,children:c?"Saving Song...":"Save Song"})})]})})]})})});export{de as default,ce as meta};
